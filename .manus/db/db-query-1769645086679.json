{
  "query": "\n-- Plans Tabelle\nCREATE TABLE IF NOT EXISTS `plans` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `slug` varchar(50) NOT NULL UNIQUE,\n  `name` varchar(100) NOT NULL,\n  `description` text,\n  `taskLimit` int NOT NULL DEFAULT 10,\n  `customTemplateLimit` int NOT NULL DEFAULT 2,\n  `storageLimit` int NOT NULL DEFAULT 100,\n  `teamMemberLimit` int NOT NULL DEFAULT 1,\n  `features` text,\n  `priceMonthly` decimal(10,2),\n  `priceYearly` decimal(10,2),\n  `sortOrder` int DEFAULT 0,\n  `isActive` boolean NOT NULL DEFAULT true,\n  `isDefault` boolean DEFAULT false,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- UserSubscriptions Tabelle\nCREATE TABLE IF NOT EXISTS `userSubscriptions` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `planId` int NOT NULL,\n  `status` enum('active', 'cancelled', 'expired', 'trial') NOT NULL DEFAULT 'trial',\n  `startedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `validUntil` timestamp NULL,\n  `cancelledAt` timestamp NULL,\n  `billingCycle` enum('monthly', 'yearly') DEFAULT 'monthly',\n  `stripeCustomerId` varchar(255),\n  `stripeSubscriptionId` varchar(255),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- UsageTracking Tabelle\nCREATE TABLE IF NOT EXISTS `usageTracking` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `periodMonth` varchar(7) NOT NULL,\n  `tasksUsed` int NOT NULL DEFAULT 0,\n  `storageUsedMb` int NOT NULL DEFAULT 0,\n  `customTemplatesCreated` int NOT NULL DEFAULT 0,\n  `documentsUploaded` int NOT NULL DEFAULT 0,\n  `documentsDownloaded` int NOT NULL DEFAULT 0,\n  `details` text,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- TemplateCategories Tabelle\nCREATE TABLE IF NOT EXISTS `templateCategories` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `organizationId` int,\n  `name` varchar(100) NOT NULL,\n  `slug` varchar(100),\n  `description` text,\n  `color` varchar(20),\n  `icon` varchar(50),\n  `sortOrder` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- TemplateCategoryAssignments Tabelle\nCREATE TABLE IF NOT EXISTS `templateCategoryAssignments` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `customTemplateId` int NOT NULL,\n  `categoryId` int NOT NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n\n-- TemplateMemberAssignments Tabelle\nCREATE TABLE IF NOT EXISTS `templateMemberAssignments` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `customTemplateId` int NOT NULL,\n  `userId` int NOT NULL,\n  `assignedBy` int NOT NULL,\n  `canUse` boolean NOT NULL DEFAULT true,\n  `canView` boolean NOT NULL DEFAULT true,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Default Plans einfügen\nINSERT IGNORE INTO `plans` (`slug`, `name`, `description`, `taskLimit`, `customTemplateLimit`, `storageLimit`, `teamMemberLimit`, `features`, `sortOrder`, `isDefault`) VALUES\n('free', 'Free / Test', 'Kostenloser Testplan mit eingeschränkten Funktionen', 10, 2, 100, 1, '[\"tasks\", \"document_upload\"]', 1, true),\n('starter', 'Starter', 'Für Einzelpersonen und kleine Teams', 50, 10, 1024, 1, '[\"tasks\", \"custom_templates\", \"document_upload\", \"document_download\", \"request_tasks\"]', 2, false),\n('business', 'Business', 'Für wachsende Unternehmen', 500, 50, 10240, 10, '[\"tasks\", \"custom_templates\", \"template_sharing\", \"document_upload\", \"document_download\", \"storage\", \"monitoring\", \"request_tasks\"]', 3, false),\n('enterprise', 'Enterprise', 'Für große Unternehmen mit erweiterten Anforderungen', 0, 0, 102400, 50, '[\"tasks\", \"custom_templates\", \"template_sharing\", \"document_upload\", \"document_download\", \"storage\", \"monitoring\", \"masking\", \"request_tasks\", \"priority_support\"]', 4, false);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 43dcVLjT8BtYBTF.073b9f7b405e --database Qtfyr7BgTHqDyUMajEnzSf --execute \n-- Plans Tabelle\nCREATE TABLE IF NOT EXISTS `plans` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `slug` varchar(50) NOT NULL UNIQUE,\n  `name` varchar(100) NOT NULL,\n  `description` text,\n  `taskLimit` int NOT NULL DEFAULT 10,\n  `customTemplateLimit` int NOT NULL DEFAULT 2,\n  `storageLimit` int NOT NULL DEFAULT 100,\n  `teamMemberLimit` int NOT NULL DEFAULT 1,\n  `features` text,\n  `priceMonthly` decimal(10,2),\n  `priceYearly` decimal(10,2),\n  `sortOrder` int DEFAULT 0,\n  `isActive` boolean NOT NULL DEFAULT true,\n  `isDefault` boolean DEFAULT false,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- UserSubscriptions Tabelle\nCREATE TABLE IF NOT EXISTS `userSubscriptions` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `planId` int NOT NULL,\n  `status` enum('active', 'cancelled', 'expired', 'trial') NOT NULL DEFAULT 'trial',\n  `startedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `validUntil` timestamp NULL,\n  `cancelledAt` timestamp NULL,\n  `billingCycle` enum('monthly', 'yearly') DEFAULT 'monthly',\n  `stripeCustomerId` varchar(255),\n  `stripeSubscriptionId` varchar(255),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- UsageTracking Tabelle\nCREATE TABLE IF NOT EXISTS `usageTracking` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `periodMonth` varchar(7) NOT NULL,\n  `tasksUsed` int NOT NULL DEFAULT 0,\n  `storageUsedMb` int NOT NULL DEFAULT 0,\n  `customTemplatesCreated` int NOT NULL DEFAULT 0,\n  `documentsUploaded` int NOT NULL DEFAULT 0,\n  `documentsDownloaded` int NOT NULL DEFAULT 0,\n  `details` text,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- TemplateCategories Tabelle\nCREATE TABLE IF NOT EXISTS `templateCategories` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `organizationId` int,\n  `name` varchar(100) NOT NULL,\n  `slug` varchar(100),\n  `description` text,\n  `color` varchar(20),\n  `icon` varchar(50),\n  `sortOrder` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- TemplateCategoryAssignments Tabelle\nCREATE TABLE IF NOT EXISTS `templateCategoryAssignments` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `customTemplateId` int NOT NULL,\n  `categoryId` int NOT NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n\n-- TemplateMemberAssignments Tabelle\nCREATE TABLE IF NOT EXISTS `templateMemberAssignments` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `customTemplateId` int NOT NULL,\n  `userId` int NOT NULL,\n  `assignedBy` int NOT NULL,\n  `canUse` boolean NOT NULL DEFAULT true,\n  `canView` boolean NOT NULL DEFAULT true,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Default Plans einfügen\nINSERT IGNORE INTO `plans` (`slug`, `name`, `description`, `taskLimit`, `customTemplateLimit`, `storageLimit`, `teamMemberLimit`, `features`, `sortOrder`, `isDefault`) VALUES\n('free', 'Free / Test', 'Kostenloser Testplan mit eingeschränkten Funktionen', 10, 2, 100, 1, '[\"tasks\", \"document_upload\"]', 1, true),\n('starter', 'Starter', 'Für Einzelpersonen und kleine Teams', 50, 10, 1024, 1, '[\"tasks\", \"custom_templates\", \"document_upload\", \"document_download\", \"request_tasks\"]', 2, false),\n('business', 'Business', 'Für wachsende Unternehmen', 500, 50, 10240, 10, '[\"tasks\", \"custom_templates\", \"template_sharing\", \"document_upload\", \"document_download\", \"storage\", \"monitoring\", \"request_tasks\"]', 3, false),\n('enterprise', 'Enterprise', 'Für große Unternehmen mit erweiterten Anforderungen', 0, 0, 102400, 50, '[\"tasks\", \"custom_templates\", \"template_sharing\", \"document_upload\", \"document_download\", \"storage\", \"monitoring\", \"masking\", \"request_tasks\", \"priority_support\"]', 4, false);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 876
}